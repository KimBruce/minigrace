Beginning test run at Tue Jul 17 16:41:34 PDT 2018
    in /home/jbrennan/Documents/GitHub/minigrace/modules/gradualTypesNDTest
minigrace[.]: Init_test: 0.22 (+0.22): starting compilation
minigrace[.]: Init_test: 0.27 (+0.05): lexing.
minigrace[.]: Init_test: 0.31 (+0.04): parsing.
minigrace[.]: Init_test: 0.4 (+0.09): checking dialect gradualTypesND used by module Init_test
minigrace[.]: Init_test: 0.66 (+0.26): loading dialect "gradualTypesND" for checkers.
minigrace[.]: Init_test: 0.9 (+0.24): rewriting tree.
minigrace[.]: Init_test: 0.96 (+0.06): symbol tables built.

1698: visiting module module Init_test
2186 Types scope before collecing types is 
dict⟬
  Done::Done
  Point::Point
  String::String
  Set::Set
  Range::Range
  Object::Object
  Sequence::Sequence
  Unknown::Unknown
  List::List
  Pattern::Pattern
  Number::Number
  Boolean::Boolean
  Binding::Binding
  Dictionary::Dictionary
⟭
matched as typeDec
matched as typeDec
2186 Types scope after collecing types is 
dict⟬
  A::UnresolvedTypeLiteral
  Done::Done
  Point::Point
  String::String
  Set::Set
  Range::Range
  Object::UnresolvedTypeLiteral
  Sequence::Sequence
  Unknown::Unknown
  List::List
  Pattern::Pattern
  Number::Number
  Boolean::Boolean
  Binding::Binding
  Dictionary::Dictionary
⟭
1958: superclass: false

1965: hasInherits is false

1989: superType is Object

2009: processing vardec s
574: defd: vardec s
575: defd.dtype identifier‹String›
2009: processing typedec Object
2009: processing typedec A
2009: processing defdec aa
574: defd: defdec aa
575: defd.dtype identifier‹Object›
2009: processing defdec b
574: defd: defdec b
575: defd.dtype identifier‹Object›
2009: processing method new(1)
573: node matched as method: method new(1)
2009: processing defdec a
574: defd: defdec a
575: defd.dtype identifier‹A›
2009: processing call print "test succeeded"
2617 ignored call print "test succeeded"
2070: checking index 1 at line 3
233: checking types of s
235: s not in cache
1820: defType is String
233: checking types of ?
235: ? not in cache
2072: finished index 1

2070: checking index 2 at line 5
233: checking types of Object
235: Object not in cache
2072: finished index 2

2070: checking index 3 at line 7
233: checking types of A
235: A not in cache
2072: finished index 3

2070: checking index 4 at line 11
233: checking types of aa
235: aa not in cache
1820: defType is Object
233: checking types of aa
235: aa not in cache
1958: superclass: false

1965: hasInherits is false

1989: superType is Object

2009: processing method new
573: node matched as method: method new
2070: checking index 1 at line 12
233: checking types of new
235: new not in cache
1567: Visiting method method new

573: node matched as method: method new
1585: Entering scope for method new

1595: collected types for [num 4]

233: checking types of ?
235: ? not in cache
233: checking types of ?
2048 type of lastNode in method new is num
2072: finished index 1

 2674 types scope is: 
dict⟬
  A::UnresolvedTypeLiteral
  Done::Done
  Point::Point
  String::String
  Set::Set
  Range::Range
  Object::Object
  Sequence::Sequence
  Unknown::Unknown
  List::List
  Pattern::Pattern
  Number::Number
  Boolean::Boolean
  Binding::Binding
  Dictionary::Dictionary
⟭
dict⟬
⟭
dict⟬
⟭
 2675 methods scope is: 
dict⟬
  Done::Done → Pattern
  Boolean::Boolean → Pattern
  Set::Set → Pattern
  Number::Number → Pattern
  prelude::prelude → Prelude
  Object::Object → Pattern
  List::List → Pattern
  Pattern::Pattern → Pattern
  Dynamic::Dynamic → Pattern
  Binding::Binding → Pattern
  done::done → Done
  true::true → Boolean
  Point::Point → Pattern
  String::String → Pattern
  Dictionary::Dictionary → Pattern
  Range::Range → Pattern
  Sequence::Sequence → Pattern
  Unknown::Unknown → Pattern
  false::false → Boolean
⟭
dict⟬
  new(1)::new(arg : String) → Object
  a::a → A
  b::b → Object
  s::s → String
  aa::aa → Object
⟭
dict⟬
  new::new → Number
⟭
1971: *** Visited object object aaconfidential type is { 
    new → Number; 
    isMe(other : Object) → Boolean; 
  }
public type is { 
    new → Number; 
  }
2153: Scope at end is: 
dict⟬
  A::UnresolvedTypeLiteral
  Done::Done
  Point::Point
  String::String
  Set::Set
  Range::Range
  Object::Object
  Sequence::Sequence
  Unknown::Unknown
  List::List
  Pattern::Pattern
  Number::Number
  Boolean::Boolean
  Binding::Binding
  Dictionary::Dictionary
⟭
dict⟬
⟭
2072: finished index 4

2070: checking index 5 at line 15
233: checking types of b
235: b not in cache
1820: defType is Object
233: checking types of b
235: b not in cache
1958: superclass: false

1965: hasInherits is false

1989: superType is Object

2009: processing bind op ++(1)
2617 ignored bind op ++(1)
2070: checking index 1 at line 16NoSuchMethod on line 2301 of ast: no method ++(_) on opNode.new(_,_,_) op ++(1).  Did you mean ≠(_), ::(_) or ==(_)?
  requested from bindNode.new(_,_).nameString at line 2301 of ast
  requested from checkTypes(_) at line 234 of gradualTypesND
  requested from block.apply(_) at line 2778 of gradualTypesND
  requested from block.apply at line 1728 of collectionsPrelude
  requested from while(_)do(_) at line 1727 of collectionsPrelude
  requested from range.uncheckedFrom(_)to(_).do(_) at line 1727 of collectionsPrelude
  requested from for(_)do(_) at line 2776 of gradualTypesND
  requested from processBody(_,_) at line 2776 of gradualTypesND
  requested from block.apply at line 2208 of gradualTypesND
  requested from scope.enter(_) at line 218 of gradualTypesND
  requested from astVisitor.visitObject(_) at line 2207 of gradualTypesND
  requested from astVisitor.visitObject(_)up(_) at line 3190 of ast
  requested from objectNode.new(_,_).accept(_)from(_) at line 1606 of ast
  requested from objectNode.new(_,_).accept(_) at line 273 of ast
  requested from block.apply at line 237 of gradualTypesND
  requested from dictionary.empty.at(_)ifAbsent(_) at line 1315 of collectionsPrelude
  requested from checkTypes(_) at line 235 of gradualTypesND
  requested from typeOf(_) at line 243 of gradualTypesND
  requested from astVisitor.visitDefDec(_) at line 2383 of gradualTypesND
  requested from astVisitor.visitDefDec(_)up(_) at line 3200 of ast
  requested from defDecNode.new(_,_,_).accept(_)from(_) at line 2381 of ast
  requested from defDecNode.new(_,_,_).accept(_) at line 273 of ast
  requested from block.apply at line 237 of gradualTypesND
  requested from dictionary.empty.at(_)ifAbsent(_) at line 1315 of collectionsPrelude
  requested from checkTypes(_) at line 235 of gradualTypesND
  requested from block.apply(_) at line 2778 of gradualTypesND
  requested from block.apply at line 1728 of collectionsPrelude
  requested from while(_)do(_) at line 1727 of collectionsPrelude
  requested from range.uncheckedFrom(_)to(_).do(_) at line 1727 of collectionsPrelude
  requested from for(_)do(_) at line 2776 of gradualTypesND
  requested from processBody(_,_) at line 2776 of gradualTypesND
  requested from block.apply at line 2208 of gradualTypesND
  requested from scope.enter(_) at line 218 of gradualTypesND
  requested from astVisitor.visitObject(_) at line 2207 of gradualTypesND
  requested from astVisitor.visitModule(_) at line 2249 of gradualTypesND
  requested from astVisitor.visitModule(_)up(_) at line 3191 of ast
  requested from moduleNode.body(_).accept(_)from(_) at line 1461 of ast
  requested from moduleNode.body(_).accept(_) at line 273 of ast
  requested from thisDialect.astChecker(_) at line 2883 of gradualTypesND
[.]Init_test.grace[0]: Unexpected exception raised by AST checker for dialect 'gradualTypesND'.
NoSuchMethod: no method ++(_) on opNode.new(_,_,_) op ++(1).  Did you mean ≠(_), ::(_) or ==(_)?
!FAIL Init_test.grace: compile error
minigrace[.]: doWhileDef_test: 0.2 (+0.2): starting compilation
minigrace[.]: doWhileDef_test: 0.25 (+0.05): lexing.
minigrace[.]: doWhileDef_test: 0.28 (+0.03): parsing.
minigrace[.]: doWhileDef_test: 0.36 (+0.08): checking dialect gradualTypesND used by module doWhileDef_test
minigrace[.]: doWhileDef_test: 0.6 (+0.24): loading dialect "gradualTypesND" for checkers.
minigrace[.]: doWhileDef_test: 0.85 (+0.25): rewriting tree.
minigrace[.]: doWhileDef_test: 0.91 (+0.06): symbol tables built.

1698: visiting module module doWhileDef_test
2186 Types scope before collecing types is 
dict⟬
  Done::Done
  Point::Point
  String::String
  Set::Set
  Range::Range
  Object::Object
  Sequence::Sequence
  Unknown::Unknown
  List::List
  Pattern::Pattern
  Number::Number
  Boolean::Boolean
  Binding::Binding
  Dictionary::Dictionary
⟭
matched as typeDec
matched as typeDec
2186 Types scope after collecing types is 
dict⟬
  Done::Done
  BoolBlock::UnresolvedTypeLiteral
  Proc0::UnresolvedTypeLiteral
  Point::Point
  String::String
  Set::Set
  Range::Range
  Object::Object
  Sequence::Sequence
  Unknown::Unknown
  List::List
  Pattern::Pattern
  Number::Number
  Boolean::Boolean
  Binding::Binding
  Dictionary::Dictionary
⟭
1958: superclass: false

1965: hasInherits is false

1989: superType is Object

2009: processing typedec BoolBlock
2009: processing typedec Proc0
2009: processing method do(1)while(1)
573: node matched as method: method do(1)while(1)
2009: processing vardec i
574: defd: vardec i
575: defd.dtype identifier‹Number›
2009: processing call do {
    print(i)
    i := i + 1
} while {
    i < 10
}
2617 ignored call do {
    print(i)
    i := i + 1
} while {
    i < 10
}
2070: checking index 1 at line 3
233: checking types of BoolBlock
235: BoolBlock not in cache
2072: finished index 1

2070: checking index 2 at line 7
233: checking types of Proc0
235: Proc0 not in cache
2072: finished index 2

2070: checking index 3 at line 11
233: checking types of do(1)while(1)
235: do(1)while(1) not in cache
1567: Visiting method method do(1)while(1)

573: node matched as method: method do(1)while(1)
1585: Entering scope for method do(1)while(1)

573: node matched as method: methodtype apply
573: node matched as method: methodtype apply
1595: collected types for [block.apply, call while(cond) do(block)]

233: checking types of apply
235: apply not in cache
1673: visitCall's call is: block.apply
2085 rec.kind = identifier
233: checking types of block
235: block not in cache
2154: block.apply
2155: apply
request on apply
2000: rType.methods is: set{≠(_ : Object) → Boolean, hash → Number, apply → Done, asString → String, asDebugString → String, :: → Binding, basicAsString → String, debugIterator → Iterator, match → Unknown, list(_ : Collection) → List, ==(_ : Object) → Object, debugValue → String}
checking request block.apply against apply → Done
1701: callType: Done
233: checking types of while(1)do(1)
235: while(1)do(1) not in cache
1673: visitCall's call is: prelude.while(1)do(1)
2085 rec.kind = identifier
233: checking types of prelude
235: prelude not in cache
2154: prelude.while(1)do(1)
2155: while(1)do(1)
request on while(1)do(1)
2000: rType.methods is: set{print(_ : Object) → Done}
2001: got to case noSuchMethod
2002: scope here is 
dict⟬
  Done::Done
  BoolBlock::{ 
    apply → Boolean; 
  }
  Proc0::{ 
    apply → Done; 
  }
  Point::Point
  String::String
  Set::Set
  Range::Range
  Object::Object
  Sequence::Sequence
  Unknown::Unknown
  List::List
  Pattern::Pattern
  Number::Number
  Boolean::Boolean
  Binding::Binding
  Dictionary::Dictionary
⟭
dict⟬
⟭
dict⟬
⟭RequestError on line 2190 of gradualTypesND: no such method or type'while(1)do(1)' in `prelude` of type
    'Prelude' 
in type 
  'set{print(_ : Object) → Done}'
  requested from Exception.raise(_)with(_) at line 2190 of gradualTypesND
  requested from block.apply at line 2190 of gradualTypesND
  requested from stackOfKind(_).findAtTop(_)butIfMissing(_) at line 168 of gradualTypesND
  requested from astVisitor.visitCall(_) at line 2186 of gradualTypesND
  requested from astVisitor.visitCall(_)up(_) at line 3189 of ast
  requested from callNode.new(_,_).accept(_)from(_) at line 1329 of ast
  requested from callNode.new(_,_).accept(_) at line 273 of ast
  requested from block.apply at line 237 of gradualTypesND
  requested from dictionary.empty.at(_)ifAbsent(_) at line 1315 of collectionsPrelude
  requested from checkTypes(_) at line 235 of gradualTypesND
  requested from block.apply(_) at line 2081 of gradualTypesND
  requested from extendedLineup.do(_) at line 2080 of gradualTypesND
  requested from for(_)do(_) at line 2080 of gradualTypesND
  requested from block.apply at line 2080 of gradualTypesND
  requested from scope.enter(_) at line 218 of gradualTypesND
  requested from astVisitor.visitMethod(_) at line 2069 of gradualTypesND
  requested from astVisitor.visitMethod(_)up(_) at line 3188 of ast
  requested from methodNode.new(_,_,_).accept(_)from(_) at line 1105 of ast
  requested from methodNode.new(_,_,_).accept(_) at line 273 of ast
  requested from block.apply at line 237 of gradualTypesND
  requested from dictionary.empty.at(_)ifAbsent(_) at line 1315 of collectionsPrelude
  requested from checkTypes(_) at line 235 of gradualTypesND
  requested from block.apply(_) at line 2778 of gradualTypesND
  requested from block.apply at line 1728 of collectionsPrelude
  requested from while(_)do(_) at line 1727 of collectionsPrelude
  requested from range.uncheckedFrom(_)to(_).do(_) at line 1727 of collectionsPrelude
  requested from for(_)do(_) at line 2776 of gradualTypesND
  requested from processBody(_,_) at line 2776 of gradualTypesND
  requested from block.apply at line 2208 of gradualTypesND
  requested from scope.enter(_) at line 218 of gradualTypesND
  requested from astVisitor.visitObject(_) at line 2207 of gradualTypesND
  requested from astVisitor.visitModule(_) at line 2249 of gradualTypesND
  requested from astVisitor.visitModule(_)up(_) at line 3191 of ast
  requested from moduleNode.body(_).accept(_)from(_) at line 1461 of ast
  requested from moduleNode.body(_).accept(_) at line 273 of ast
  requested from thisDialect.astChecker(_) at line 2883 of gradualTypesND
[.]doWhileDef_test.grace[0]: Unexpected exception raised by AST checker for dialect 'gradualTypesND'.
RequestError: no such method or type'while(1)do(1)' in `prelude` of type
    'Prelude' 
in type 
  'set{print(_ : Object) → Done}'
!FAIL doWhileDef_test.grace: compile error
minigrace[.]: t300_visitMatchCase_test: 0.21 (+0.21): starting compilation
minigrace[.]: t300_visitMatchCase_test: 0.28 (+0.07): lexing.
minigrace[.]: t300_visitMatchCase_test: 0.44 (+0.16): parsing.
minigrace[.]: t300_visitMatchCase_test: 0.64 (+0.2): checking dialect minitest used by module t300_visitMatchCase_test
minigrace[.]: t300_visitMatchCase_test: 0.73 (+0.09): no need to load dialect "minitest": it does not define `thisDialect`
minigrace[.]: t300_visitMatchCase_test: 0.73 (+0): rewriting tree.
minigrace[.]: t300_visitMatchCase_test: 1.03 (+0.3): symbol tables built.
minigrace[.]: t300_visitMatchCase_test: 1.1 (+0.07): generating JavaScript code.
AST nodes compiled:
    identifier	96
    string	96
    member	57
    call	44
    block	27
    defdec	16
    op	10
    method	7
    import	7
    array	1
    dialect	1
    num	1
minigrace[.]: t300_visitMatchCase_test: 1.27 (+0.17): done.
NoSuchMethod on line 96 of t300_visitMatchCase_test: no method lexinput(_) on a new.
  raised at module initialization at line 96 of t300_visitMatchCase_test
  95: //Turns input into an abstract syntax tree (ast)
  96: def tokens = lexer.new.lexinput(input)
  97: def module = parser.parse(tokens)

!FAIL t300_visitMatchCase_test.grace: wrong output
Errors:
NoSuchMethod on line 96 of t300_visitMatchCase_test: no method lexinput(_) on a new.
  raised at module initialization at line 96 of t300_visitMatchCase_test
  95: //Turns input into an abstract syntax tree (ast)
  96: def tokens = lexer.new.lexinput(input)
  97: def module = parser.parse(tokens)

Got output:
Expected output:
visitMatchCase tests: 7 run, 0 failed, 0 errors
minigrace[.]: t301_isSubtypeOfNonVariants_test: 0.21 (+0.21): starting compilation
minigrace[.]: t301_isSubtypeOfNonVariants_test: 0.27 (+0.06): lexing.
minigrace[.]: t301_isSubtypeOfNonVariants_test: 0.36 (+0.09): parsing.
minigrace[.]: t301_isSubtypeOfNonVariants_test: 0.52 (+0.16): checking dialect minitest used by module t301_isSubtypeOfNonVariants_test
minigrace[.]: t301_isSubtypeOfNonVariants_test: 0.6 (+0.08): no need to load dialect "minitest": it does not define `thisDialect`
minigrace[.]: t301_isSubtypeOfNonVariants_test: 0.61 (+0.01): rewriting tree.
minigrace[.]: t301_isSubtypeOfNonVariants_test: 0.89 (+0.28): symbol tables built.
minigrace[.]: t301_isSubtypeOfNonVariants_test: 0.93 (+0.04): generating JavaScript code.
AST nodes compiled:
    identifier	71
    call	36
    string	29
    member	18
    defdec	15
    method	7
    import	7
    block	5
    num	5
    array	1
    dialect	1
minigrace[.]: t301_isSubtypeOfNonVariants_test: 1.01 (+0.08): done.
NoSuchMethod on line 33 of t301_isSubtypeOfNonVariants_test: no method lexinput(_) on a new.
  raised at module initialization at line 33 of t301_isSubtypeOfNonVariants_test
  32: //Turns input into an abstract syntax tree (ast)
  33: def tokens = lexer.new.lexinput(input)
  34: def module = parser.parse(tokens)

!FAIL t301_isSubtypeOfNonVariants_test.grace: wrong output
Errors:
NoSuchMethod on line 33 of t301_isSubtypeOfNonVariants_test: no method lexinput(_) on a new.
  raised at module initialization at line 33 of t301_isSubtypeOfNonVariants_test
  32: //Turns input into an abstract syntax tree (ast)
  33: def tokens = lexer.new.lexinput(input)
  34: def module = parser.parse(tokens)

Got output:
Expected output:
isSubtypeOf non-variant tests: 4 run, 0 failed, 0 errors
minigrace[.]: t302_isSubtypeOfVariants_test: 0.22 (+0.22): starting compilation
minigrace[.]: t302_isSubtypeOfVariants_test: 0.28 (+0.06): lexing.
minigrace[.]: t302_isSubtypeOfVariants_test: 0.38 (+0.1): parsing.
minigrace[.]: t302_isSubtypeOfVariants_test: 0.55 (+0.17): checking dialect minitest used by module t302_isSubtypeOfVariants_test
minigrace[.]: t302_isSubtypeOfVariants_test: 0.63 (+0.08): no need to load dialect "minitest": it does not define `thisDialect`
minigrace[.]: t302_isSubtypeOfVariants_test: 0.63 (+0): rewriting tree.
minigrace[.]: t302_isSubtypeOfVariants_test: 0.92 (+0.29): symbol tables built.
minigrace[.]: t302_isSubtypeOfVariants_test: 0.95 (+0.03): generating JavaScript code.
AST nodes compiled:
    identifier	83
    call	29
    member	23
    defdec	21
    string	21
    op	8
    method	7
    import	7
    num	4
    block	4
    dialect	1
    array	1
minigrace[.]: t302_isSubtypeOfVariants_test: 1.04 (+0.09): done.
NoSuchMethod on line 28 of t302_isSubtypeOfVariants_test: no method lexinput(_) on a new.
  raised at module initialization at line 28 of t302_isSubtypeOfVariants_test
  27: //Turns input into an abstract syntax tree (ast)
  28: def tokens = lexer.new.lexinput(input)
  29: def module = parser.parse(tokens)

!FAIL t302_isSubtypeOfVariants_test.grace: wrong output
Errors:
NoSuchMethod on line 28 of t302_isSubtypeOfVariants_test: no method lexinput(_) on a new.
  raised at module initialization at line 28 of t302_isSubtypeOfVariants_test
  27: //Turns input into an abstract syntax tree (ast)
  28: def tokens = lexer.new.lexinput(input)
  29: def module = parser.parse(tokens)

Got output:
Expected output:
isSubtypeOf variant tests: 3 run, 0 failed, 0 errors
minigrace[.]: t304_SelfReferentialSubtypeError_test: 0.2 (+0.2): starting compilation
minigrace[.]: t304_SelfReferentialSubtypeError_test: 0.25 (+0.05): lexing.
minigrace[.]: t304_SelfReferentialSubtypeError_test: 0.29 (+0.04): parsing.
minigrace[.]: t304_SelfReferentialSubtypeError_test: 0.38 (+0.09): checking dialect minitest used by module t304_SelfReferentialSubtypeError_test
minigrace[.]: t304_SelfReferentialSubtypeError_test: 0.49 (+0.11): no need to load dialect "minitest": it does not define `thisDialect`
minigrace[.]: t304_SelfReferentialSubtypeError_test: 0.49 (+0): rewriting tree.
minigrace[.]: t304_SelfReferentialSubtypeError_test: 0.81 (+0.32): symbol tables built.
minigrace[.]: t304_SelfReferentialSubtypeError_test: 0.84 (+0.03): generating JavaScript code.
AST nodes compiled:
    identifier	22
    string	14
    call	9
    import	7
    method	7
    defdec	4
    member	4
    block	3
    dialect	1
    array	1
minigrace[.]: t304_SelfReferentialSubtypeError_test: 0.91 (+0.07): done.
NoSuchMethod on line 29 of t304_SelfReferentialSubtypeError_test: no method lexinput(_) on a new.
  raised at module initialization at line 29 of t304_SelfReferentialSubtypeError_test
  28: //Turns input into an abstract syntax tree (ast)
  29: def tokens = lexer.new.lexinput(input)
  30: def module = parser.parse(tokens)

!FAIL t304_SelfReferentialSubtypeError_test.grace: wrong output
Errors:
NoSuchMethod on line 29 of t304_SelfReferentialSubtypeError_test: no method lexinput(_) on a new.
  raised at module initialization at line 29 of t304_SelfReferentialSubtypeError_test
  28: //Turns input into an abstract syntax tree (ast)
  29: def tokens = lexer.new.lexinput(input)
  30: def module = parser.parse(tokens)

Got output:
Expected output:
self-referential subtype test: 1 run, 0 failed, 0 errors
minigrace[.]: t305_ampersand_test: 0.2 (+0.2): starting compilation
minigrace[.]: t305_ampersand_test: 0.27 (+0.07): lexing.
minigrace[.]: t305_ampersand_test: 0.39 (+0.12): parsing.
minigrace[.]: t305_ampersand_test: 0.61 (+0.22): checking dialect minitest used by module t305_ampersand_test
minigrace[.]: t305_ampersand_test: 0.68 (+0.07): no need to load dialect "minitest": it does not define `thisDialect`
minigrace[.]: t305_ampersand_test: 0.68 (+0): rewriting tree.
minigrace[.]: t305_ampersand_test: 0.98 (+0.3): symbol tables built.
minigrace[.]: t305_ampersand_test: 1.04 (+0.06): generating JavaScript code.
AST nodes compiled:
    identifier	123
    call	42
    op	32
    member	27
    string	24
    defdec	21
    block	9
    method	7
    import	7
    num	7
    dialect	1
    array	1
minigrace[.]: t305_ampersand_test: 1.16 (+0.12): done.
NoSuchMethod on line 29 of t305_ampersand_test: no method lexinput(_) on a new.
  raised at module initialization at line 29 of t305_ampersand_test
  28: //Turns input into an abstract syntax tree (ast)
  29: def tokens = lexer.new.lexinput(input)
  30: def module = parser.parse(tokens)

!FAIL t305_ampersand_test.grace: wrong output
Errors:
NoSuchMethod on line 29 of t305_ampersand_test: no method lexinput(_) on a new.
  raised at module initialization at line 29 of t305_ampersand_test
  28: //Turns input into an abstract syntax tree (ast)
  29: def tokens = lexer.new.lexinput(input)
  30: def module = parser.parse(tokens)

Got output:
Expected output:
ampersand with variant types: 6 run, 0 failed, 0 errors
minigrace[.]: t306_ampersandIncompatibility_test: 0.2 (+0.2): starting compilation
minigrace[.]: t306_ampersandIncompatibility_test: 0.25 (+0.05): lexing.
minigrace[.]: t306_ampersandIncompatibility_test: 0.34 (+0.09): parsing.
minigrace[.]: t306_ampersandIncompatibility_test: 0.51 (+0.17): checking dialect minitest used by module t306_ampersandIncompatibility_test
minigrace[.]: t306_ampersandIncompatibility_test: 0.6 (+0.09): no need to load dialect "minitest": it does not define `thisDialect`
minigrace[.]: t306_ampersandIncompatibility_test: 0.6 (+0): rewriting tree.
minigrace[.]: t306_ampersandIncompatibility_test: 0.89 (+0.29): symbol tables built.
minigrace[.]: t306_ampersandIncompatibility_test: 0.92 (+0.03): generating JavaScript code.
AST nodes compiled:
    identifier	64
    call	24
    member	22
    defdec	16
    string	12
    block	8
    method	7
    import	7
    num	5
    op	4
    dialect	1
    array	1
minigrace[.]: t306_ampersandIncompatibility_test: 1.01 (+0.09): done.
NoSuchMethod on line 24 of t306_ampersandIncompatibility_test: no method lexinput(_) on a new.
  raised at module initialization at line 24 of t306_ampersandIncompatibility_test
  23: //Turns input into an abstract syntax tree (ast)
  24: def tokens = lexer.new.lexinput(input)
  25: def module = parser.parse(tokens)

!FAIL t306_ampersandIncompatibility_test.grace: wrong output
Errors:
NoSuchMethod on line 24 of t306_ampersandIncompatibility_test: no method lexinput(_) on a new.
  raised at module initialization at line 24 of t306_ampersandIncompatibility_test
  23: //Turns input into an abstract syntax tree (ast)
  24: def tokens = lexer.new.lexinput(input)
  25: def module = parser.parse(tokens)

Got output:
Expected output:
ampersand incompatibility: 4 run, 0 failed, 0 errors
minigrace[.]: test3_test: 0.2 (+0.2): starting compilation
minigrace[.]: test3_test: 0.26 (+0.06): lexing.
[.]test3_test.grace[19:1-5]: Syntax error: on closing a block, the indentation must return to the same level as when the block was opened
currentLineIndent = 4; indentStack.last = 0; braceChange = -1
  18:         method q → String {"d"}
  19:     }
------^^^^^
!FAIL test3_test.grace: compile error
minigrace[.]: testid_test: 0.2 (+0.2): starting compilation
minigrace[.]: testid_test: 0.25 (+0.05): lexing.
minigrace[.]: testid_test: 0.3 (+0.05): parsing.
minigrace[.]: testid_test: 0.37 (+0.07): 0: (13.39)rbrace } closes if opened by (13.21)identifier if
minigrace[.]: testid_test: 0.37 (+0): 1: (13.49)rbrace } closes if opened by (13.21)identifier if
minigrace[.]: testid_test: 0.43 (+0.06): 0: (35.40)rbrace } closes if opened by (35.1)identifier if
minigrace[.]: testid_test: 0.43 (+0): checking dialect gradualTypesND used by module testid_test
minigrace[.]: testid_test: 0.69 (+0.26): loading dialect "gradualTypesND" for checkers.
minigrace[.]: testid_test: 0.92 (+0.23): rewriting tree.
minigrace[.]: testid_test: 0.98 (+0.06): symbol tables built.

1698: visiting module module testid_test
2186 Types scope before collecing types is 
dict⟬
  Done::Done
  Point::Point
  String::String
  Set::Set
  Range::Range
  Object::Object
  Sequence::Sequence
  Unknown::Unknown
  List::List
  Pattern::Pattern
  Number::Number
  Boolean::Boolean
  Binding::Binding
  Dictionary::Dictionary
⟭
matched as typeDec
2186 Types scope after collecing types is 
dict⟬
  A::UnresolvedTypeLiteral
  Done::Done
  Point::Point
  String::String
  Set::Set
  Range::Range
  Object::Object
  Sequence::Sequence
  Unknown::Unknown
  List::List
  Pattern::Pattern
  Number::Number
  Boolean::Boolean
  Binding::Binding
  Dictionary::Dictionary
⟭
1958: superclass: false

1965: hasInherits is false

1989: superType is Object

2009: processing defdec n
574: defd: defdec n
575: defd.dtype identifier‹Number›
2009: processing vardec m
574: defd: vardec m
575: defd.dtype identifier‹String›
2009: processing bind string "def"
2617 ignored bind string "def"
2009: processing method q(1)
573: node matched as method: method q(1)
2009: processing call q 4
2617 ignored call q 4
2009: processing defdec ifval
574: defd: defdec ifval
575: defd.dtype identifier‹Number›
2009: processing call print(ifval)
2617 ignored call print(ifval)
2009: processing typedec A
2009: processing defdec z
574: defd: defdec z
575: defd.dtype identifier‹A›
2009: processing call print("z.p(3) is " ++ z.p 3 ++ "")
2617 ignored call print("z.p(3) is " ++ z.p 3 ++ "")
2009: processing call print(z.const)
2617 ignored call print(z.const)
2009: processing call print(z.r)
2617 ignored call print(z.r)
2009: processing call z.r:= "aaa"
2617 ignored call z.r:= "aaa"
2009: processing call print(z.r)
2617 ignored call print(z.r)
2009: processing if ?
2617 ignored if ?
2070: checking index 1 at line 3
233: checking types of n
235: n not in cache
1820: defType is Number
233: checking types of ?
235: ? not in cache
2072: finished index 1

2070: checking index 2 at line 5
233: checking types of m
235: m not in cache
1820: defType is String
233: checking types of ?
235: ? not in cache
2072: finished index 2

2070: checking index 3 at line 7NoSuchMethod on line 2301 of ast: no method ++(_) on stringNode.new(_) string "def".  Did you mean ≠(_), ::(_) or ==(_)?
  requested from bindNode.new(_,_).nameString at line 2301 of ast
  requested from checkTypes(_) at line 234 of gradualTypesND
  requested from block.apply(_) at line 2778 of gradualTypesND
  requested from block.apply at line 1728 of collectionsPrelude
  requested from while(_)do(_) at line 1727 of collectionsPrelude
  requested from range.uncheckedFrom(_)to(_).do(_) at line 1727 of collectionsPrelude
  requested from for(_)do(_) at line 2776 of gradualTypesND
  requested from processBody(_,_) at line 2776 of gradualTypesND
  requested from block.apply at line 2208 of gradualTypesND
  requested from scope.enter(_) at line 218 of gradualTypesND
  requested from astVisitor.visitObject(_) at line 2207 of gradualTypesND
  requested from astVisitor.visitModule(_) at line 2249 of gradualTypesND
  requested from astVisitor.visitModule(_)up(_) at line 3191 of ast
  requested from moduleNode.body(_).accept(_)from(_) at line 1461 of ast
  requested from moduleNode.body(_).accept(_) at line 273 of ast
  requested from thisDialect.astChecker(_) at line 2883 of gradualTypesND
[.]testid_test.grace[0]: Unexpected exception raised by AST checker for dialect 'gradualTypesND'.
NoSuchMethod: no method ++(_) on stringNode.new(_) string "def".  Did you mean ≠(_), ::(_) or ==(_)?
!FAIL testid_test.grace: compile error
minigrace[.]: whileTest_test: 0.22 (+0.22): starting compilation
minigrace[.]: whileTest_test: 0.27 (+0.05): lexing.
minigrace[.]: whileTest_test: 0.29 (+0.02): parsing.
minigrace[.]: whileTest_test: 0.34 (+0.05): checking dialect gradualTypesND used by module whileTest_test
minigrace[.]: whileTest_test: 0.59 (+0.25): loading dialect "gradualTypesND" for checkers.
minigrace[.]: whileTest_test: 0.84 (+0.25): rewriting tree.
minigrace[.]: whileTest_test: 0.87 (+0.03): symbol tables built.

1698: visiting module module whileTest_test
2186 Types scope before collecing types is 
dict⟬
  Done::Done
  Point::Point
  String::String
  Set::Set
  Range::Range
  Object::Object
  Sequence::Sequence
  Unknown::Unknown
  List::List
  Pattern::Pattern
  Number::Number
  Boolean::Boolean
  Binding::Binding
  Dictionary::Dictionary
⟭
2186 Types scope after collecing types is 
dict⟬
  Done::Done
  Point::Point
  String::String
  Set::Set
  Range::Range
  Object::Object
  Sequence::Sequence
  Unknown::Unknown
  List::List
  Pattern::Pattern
  Number::Number
  Boolean::Boolean
  Binding::Binding
  Dictionary::Dictionary
⟭
1958: superclass: false

1965: hasInherits is false

1989: superType is Object

2009: processing vardec x
574: defd: vardec x
575: defd.dtype identifier‹Number›
2009: processing call while {
    x < 3
} do {
    print(x)
    x := x + 1
}
2617 ignored call while {
    x < 3
} do {
    print(x)
    x := x + 1
}
2070: checking index 1 at line 3
233: checking types of x
235: x not in cache
1820: defType is Number
233: checking types of ?
235: ? not in cache
2072: finished index 1

2070: checking index 2 at line 5
233: checking types of while(1)do(1)
235: while(1)do(1) not in cache
1673: visitCall's call is: prelude.while(1)do(1)
2085 rec.kind = identifier
233: checking types of prelude
235: prelude not in cache
2154: prelude.while(1)do(1)
2155: while(1)do(1)
request on while(1)do(1)
2000: rType.methods is: set{print(_ : Object) → Done}
2001: got to case noSuchMethod
2002: scope here is 
dict⟬
  Done::Done
  Point::Point
  String::String
  Set::Set
  Range::Range
  Object::Object
  Sequence::Sequence
  Unknown::Unknown
  List::List
  Pattern::Pattern
  Number::Number
  Boolean::Boolean
  Binding::Binding
  Dictionary::Dictionary
⟭
dict⟬
⟭RequestError on line 2190 of gradualTypesND: no such method or type'while(1)do(1)' in `prelude` of type
    'Prelude' 
in type 
  'set{print(_ : Object) → Done}'
  requested from Exception.raise(_)with(_) at line 2190 of gradualTypesND
  requested from block.apply at line 2190 of gradualTypesND
  requested from stackOfKind(_).findAtTop(_)butIfMissing(_) at line 168 of gradualTypesND
  requested from astVisitor.visitCall(_) at line 2186 of gradualTypesND
  requested from astVisitor.visitCall(_)up(_) at line 3189 of ast
  requested from callNode.new(_,_).accept(_)from(_) at line 1329 of ast
  requested from callNode.new(_,_).accept(_) at line 273 of ast
  requested from block.apply at line 237 of gradualTypesND
  requested from dictionary.empty.at(_)ifAbsent(_) at line 1315 of collectionsPrelude
  requested from checkTypes(_) at line 235 of gradualTypesND
  requested from block.apply(_) at line 2778 of gradualTypesND
  requested from block.apply at line 1728 of collectionsPrelude
  requested from while(_)do(_) at line 1727 of collectionsPrelude
  requested from range.uncheckedFrom(_)to(_).do(_) at line 1727 of collectionsPrelude
  requested from for(_)do(_) at line 2776 of gradualTypesND
  requested from processBody(_,_) at line 2776 of gradualTypesND
  requested from block.apply at line 2208 of gradualTypesND
  requested from scope.enter(_) at line 218 of gradualTypesND
  requested from astVisitor.visitObject(_) at line 2207 of gradualTypesND
  requested from astVisitor.visitModule(_) at line 2249 of gradualTypesND
  requested from astVisitor.visitModule(_)up(_) at line 3191 of ast
  requested from moduleNode.body(_).accept(_)from(_) at line 1461 of ast
  requested from moduleNode.body(_).accept(_) at line 273 of ast
  requested from thisDialect.astChecker(_) at line 2883 of gradualTypesND
[.]whileTest_test.grace[0]: Unexpected exception raised by AST checker for dialect 'gradualTypesND'.
RequestError: no such method or type'while(1)do(1)' in `prelude` of type
    'Prelude' 
in type 
  'set{print(_ : Object) → Done}'
!FAIL whileTest_test.grace: compile error
24/35 passed.
6 tests compiled but produced the wrong output.
5 tests did not compile but should have.
